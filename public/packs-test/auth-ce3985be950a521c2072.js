(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[5],{"1tu7":function(e,t,r){"use strict";var n,o,a,i,s,l,u,c=r("2vnA");function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t,r,n,o){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(o=p((n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"errors",o,this),f(this,"formIsBlocked",a,this),f(this,"user",i,this),f(this,"updateErrors",s,this),f(this,"toggleFormBlocker",l,this),f(this,"handleUserFieldChange",u,this)}).prototype,"errors",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),a=p(n.prototype,"formIsBlocked",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=p(n.prototype,"user",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{email:"",password:"",password_confirmation:""}}}),s=p(n.prototype,"updateErrors",[c.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t?e.errors.replace(t):e.errors.clear()}}}),l=p(n.prototype,"toggleFormBlocker",[c.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.formIsBlocked=t}}}),u=p(n.prototype,"handleUserFieldChange",[c.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=t.target,n=r.name,o=r.value;e.user[n]=o}}}),n);t.a=b},"7NM1":function(e,t,r){"use strict";(function(e){var n=r("qvf+"),o=r("kMSe"),a=r("2vnA"),i=r("kh6J");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function u(t){var r,o=t.store,u=t.mode,c=t.config,f=(l(t,["store","mode","config"]),o.user),p=o.errors,b=o.formIsBlocked,d=o.handleUserFieldChange,m=classNames("base-btn is-success is-xl",(s(r={},c.btnClass,c.btnClass),s(r,"is-disable",b),r)),h=classNames("base-form-footer",{"is-disabled":b}),g=c.fields.map((function(t,r){return e.createElement(n.a,{field:t,user:f,errors:Object(a.toJS)(p),handleUserFieldChange:d,i:r,key:r})})),y=_(Object(a.toJS)(p)).map((function(e){return{children:e,type:"error"}})).tap((function(e){e.length&&(e[0].className="is-top")})).value();return e.createElement("div",null,e.createElement("div",{className:"base-form-body"},e.createElement(i.b,{alerts:y}),e.createElement("div",{className:"base-form-group"},e.createElement("div",{className:"base-form-group-title"},c.title),g)),e.createElement("div",{className:h},"login"===u&&e.createElement("a",{href:Routes.password_resets_path(),className:"base-btn is-transparent"},"Forgot password"),e.createElement("input",{disabled:b,type:"submit",value:c.btnText,className:m})))}u.propTypes={store:PT.object.isRequired,mode:PT.string.isRequired,config:PT.object.isRequired},t.a=Object(o.d)(u)}).call(this,r("q1tI"))},BAES:function(e,t,r){"use strict";r("qvf+");var n=r("7NM1");r.d(t,"a",(function(){return n.a}));r("jnO1")},E0QX:function(e,t,r){"use strict";r.r(t);var n=r("ho87"),o=r("vRNn");n.a.render(o.a,"Auth")},"qvf+":function(e,t,r){"use strict";(function(e){var n=r("jnO1"),o=r("kMSe");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(t){var r,o=t.field,s=t.i,l=t.errors,u=t.user,c=i(t,["field","i","errors","user"]),f=classNames("base-form-row",{"is-first":0===s}),p=classNames("base-input",(a(r={},o.className,!!o.className),a(r,"is-error",_.get(l,o.name,!1)),r));return e.createElement("div",{className:f},e.createElement("label",{className:"base-form-label",htmlFor:o.name},o.label),e.createElement("input",{type:o.type,name:o.name,autoFocus:0===s,className:p,value:u[o.name],onChange:c.handleUserFieldChange}),e.createElement(n.a,{errors:l,name:o.name}))}s.propTypes={field:PT.object.isRequired,i:PT.number.isRequired,errors:PT.object,user:PT.object.isRequired,handleUserFieldChange:PT.func.isRequired},t.a=Object(o.d)(s)}).call(this,r("q1tI"))},vRNn:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return w}));var n,o,a,i=r("BAES"),s=r("kMSe"),l=r("2vnA"),u=r("1tu7"),c=r("ZVfT");function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=["Something went wrong"],g=Object(s.d)((a=o=function(t){function r(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=b(this,d(r).call(this,e))).handleSubmit=function(e){var r=Object(l.toJS)(t.props.authStore.user);e.preventDefault(),t.props.authStore.updateErrors(null),t.props.authStore.toggleFormBlocker(!0),$.ajax({url:t.config.url,type:t.config.type,data:Object(c.x)("user",Object(c.q)(r)),complete:function(){return t.props.authStore.toggleFormBlocker(!1)},success:t.handleSuccess,error:t.handleRequestErrors})},t.handleChange=function(){var e=!_.values(t.props.authStore.user).join("");t.props.authStore.toggleFormBlocker(e)},t.handleSuccess=function(e){var t=e.path,r=e.success_message;r&&Validation.succeed(r),t&&(window.location=t)},t.handleRequestErrors=function(e){var r=_.get(e,"responseJSON.errors",null),n=_.isPlainObject(r)?r:{base:[r||h]};t.props.authStore.updateErrors(n),!r&&window.bugsnagClient&&bugsnagClient.notify({name:"Empty errors for auth",message:"Catching error"},{metaData:e})};var n,o,a=e.mode,i=e.reset_token;return t.config=(n={resetToken:i},o=n.resetToken,{login:{url:Routes.login_path(),type:"POST",btnClass:"ac-login-button",btnText:"Login",title:"Login",hero:"Welcome",fields:[{name:"email",label:"Your email",type:"email",className:"ac-user-email"},{name:"password",label:"Password",type:"password",className:"ac-user-password"}]},reset_password:{url:Routes.password_resets_path(),type:"POST",btnClass:"ac-reset-password-button",btnText:"Reset Password",title:"Reset Password",hero:"Reset Password",fields:[{name:"email",label:"Your email",type:"email"}]},update_password:{url:Routes.password_reset_path(o),type:"PUT",resetToken:o,btnClass:"ac-update-password-button",btnText:"Update Password",title:"Set New Password",hero:"Reset Password",fields:[{name:"password",label:"Password",type:"password"},{name:"password_confirmation",label:"Password confirmation",type:"password"}]}})[a],e.authStore.toggleFormBlocker(!0),t}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,t),n=r,(o=[{key:"componentDidMount",value:function(){_.includes(window.location.search,"err_msg=expired")&&Validation.showErrorFlash("The password reset link has expired, please try resetting your password again",1e4)}},{key:"render",value:function(){var t=this.props,r=t.mode,n=t.authStore;return e.createElement("div",null,e.createElement("h1",{className:"App-title is-hero mbxl"},this.config.hero),e.createElement("form",{onSubmit:this.handleSubmit,onChange:this.handleChange,className:"base-form"},e.createElement(i.a,{config:this.config,store:n,mode:r})))}}])&&p(n.prototype,o),a&&p(n,a),r}(e.Component),o.propTypes={authStore:PT.object.isRequired,reset_token:PT.string,mode:PT.oneOf(["login","reset_password","update_password"]).isRequired},o.defaultProps={reset_token:"0"},n=a))||n,y=_.flow(Object(s.c)("authStore"))(g);function w(t){return e.createElement(s.b,{authStore:new u.a},e.createElement(y,t))}}).call(this,r("q1tI"))}},[["E0QX",0,1]]]);