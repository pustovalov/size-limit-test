(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[31],{"1m7l":function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return d}));var n,i=r("kMSe"),a=r("rSsM"),o=r("Iw0f"),c=r("Z0hH"),l=r("pA6q");function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=Object(i.c)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(r,!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))(n=Object(i.d)(n=function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),u(this,m(r).apply(this,arguments))}var n,i,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(r,t),n=r,(i=[{key:"componentDidMount",value:function(){this.props.campaignsStore.fetchCampaigns(),this.props.multipleCampaignEditorStore.fetchCampaignsByLocaleKey(),this.props.multipleCampaignEditorStore.fetchAvailableVariables()}},{key:"render",value:function(){var t=this.props.multipleCampaignEditorStore.campaignEditorUrl;return e.createElement("div",null,e.createElement(a.a,{leftPanel:[{href:t,text:"Back to Editor",icon:"leftArrow"}]}),e.createElement(l.e,null))}}])&&p(n.prototype,i),o&&p(n,o),r}(e.Component))||n)||n,d=function(){var t={campaignsStore:o.a,multipleCampaignEditorStore:c.a};return e.createElement(i.b,t,e.createElement(g,null))}}).call(this,r("q1tI"))},"4GYj":function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return g}));var n,i=r("kMSe"),a=r("pA6q"),o=r("u7Uh"),c=r("GaHK");function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(){return e.createElement("span",{className:"component-loader-box"},"XXXXXXXXXXXXXXXXXXXXXXX")},g=Object(i.c)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))(n=Object(i.d)(n=function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),p(this,u(r).apply(this,arguments))}var n,i,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,t),n=r,(i=[{key:"render",value:function(){var t=this.props.multipleCampaignEditorStore,r=t.currentLocaleEntryData,n=r.localeEntry,i=r.viewSetup,l=t.availableVariablesFetched,s=t.cancelChanges,p=t.pristine,u=t.selectedCampaigns,m=t.submitForm,f=t.togglePreview,y=t.variablesData,g=l&&_.isEmpty(_.get(n,"enum_values"))&&!_.get(i,"disabled_by_configuration")&&_.get(n,"isString"),d=classNames("link pas mhl",{"is-disabled":p}),h=classNames("base-btn is-icon",{"is-disabled":_.isEmpty(u)});return e.createElement("div",{className:"App-container-inner is-3of4"},e.createElement("div",{className:"App-layout-head"},e.createElement("h1",{className:"App-title is-hero"},"Multiple Campaign Editor")),e.createElement("div",{className:"App-layout-container is-rounded"},e.createElement("div",{className:"base-form-body is-with-bottom-radius"},e.createElement("div",{className:"base-form-row"},e.createElement("div",{className:"base-form-label is-big is-bold"},"Campaign view"),e.createElement("p",{className:"paragraph is-medium"},_.get(i,"human_name",e.createElement(b,null)))),e.createElement("div",{className:"base-form-row pts"},e.createElement("div",{className:"base-form-label is-big is-bold"},"Content"),e.createElement("p",{className:"paragraph is-medium"},_.get(n,"humanizedKey",e.createElement(b,null)))),e.createElement("div",{className:"base-form-row pts"},e.createElement("label",{htmlFor:"locale-entry-value",className:"base-form-label is-big is-bold mbm"},"New content value"),l?e.createElement("div",{className:"edit-field-grid"},e.createElement(a.f,null),e.createElement("div",{className:"edit-field-grid-gutter"}),e.createElement("button",{type:"button",className:h,onClick:f},e.createElement(c.UIIcon,{name:"eyeGray"}))):e.createElement(a.d,null),g&&e.createElement(o.a,{title:function(){return"Variables"},isFetched:g,data:y,render:function(t,r){return e.createElement("div",{className:(n=r,classNames("link ptm",{"is-disabled":n})),onClick:t},e.createElement("i",{className:"link-icon"},e.createElement(c.UIIcon,{name:"bracers"})),"Show variables");var n}})),e.createElement("div",{className:"base-form-divider"}),e.createElement("div",{className:"base-form-row pts"},e.createElement("div",{className:"base-form-label is-big is-bold"},"Select campaigns"),e.createElement("p",{className:"paragraph is-medium"},"The new content value will be changed across selected campaigns below."),e.createElement(a.a,null))),e.createElement("div",{className:"base-form-footer"},e.createElement("div",{className:d,onClick:s},"Cancel"),e.createElement("button",{className:"base-btn is-success is-big",onClick:m,disabled:p,type:"button"},"Save Content"))))}}])&&s(n.prototype,i),l&&s(n,l),r}(e.Component))||n)||n}).call(this,r("q1tI"))},Foy5:function(e,t,r){"use strict";function n(e){var t={};return function e(t,r,n){_.isObject(r)&&_.keys(r).forEach((function(i){delete t[i];var a=n?"".concat(n,".").concat(i):i;a=a.replace(/(\.)([0-9]+)/g,"[$2]"),_.isObject(_.get(r,i))?e(t,_.get(r,i),a):t[a]=a}))}(t,function(e){return _.transform(e,(function(e,t,r){t.description&&(e[r]=t.value)}),{})}(e)),_.keys(t)}r.d(t,"a",(function(){return n}))},Iw0f:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("o0o1"),i=r.n(n),a=r("52sZ"),o=r("jf9b"),c=r("99Ma"),l=c.types.model("CampaignsStore",{campaigns:c.types.optional(c.types.map(o.a),{}),campaignsFetched:!1}).views((function(e){return{}})).actions((function(e){return{fetchCampaigns:Object(c.flow)(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.campaignsFetched=!1,t.next=4,$.ajax({url:Routes.internal_site_campaigns_path(a.b.models.site.cached_slug)});case 4:r=t.sent,e.updateCampaigns(_.get(r,"result.campaigns")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Widget.Utils.notifyDevelopers({name:"Unable to fetch Campaigns",message:"Ajax failure",xhr:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),updateCampaigns:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){return e.updateCampaign(t)})),e.campaignsFetched=!0},updateCampaign:function(t){e.campaigns.put(t)}}})).create()},OF73:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return n}));var n=function(){return e.createElement("div",{className:"component-loader"},e.createElement("div",{className:"edit-field-grid"},e.createElement("div",{className:"edit-field-grid-fluid component-loader-box"}),e.createElement("div",{className:"edit-field-grid-gutter"}),e.createElement("div",{className:"base-btn is-icon component-loader-box"})))}}).call(this,r("q1tI"))},QSSZ:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i}));var n={width:"22px",height:"22px"},i=function(){return e.createElement("div",{className:"component-loader"},e.createElement("div",{className:"campaignfilter component-loader-outline"},e.createElement("div",{className:"campaignfilter-cell is-query component-loader-box"}),e.createElement("div",{className:"campaignfilter-cell"},e.createElement("div",{className:"campaignfilter-result component-loader-box"}))),e.createElement("ul",{className:"campaignfilter-list"},_.times(10,(function(t){return e.createElement("li",{className:"is-edit",key:t},e.createElement("div",{className:"campaignfilter-campaign-check"},e.createElement("div",{className:"component-loader-box mrm",style:n})),e.createElement("div",{className:"campaignfilter-campaign-status is-live"},e.createElement("i",{className:"component-loader-box"})),e.createElement("div",{className:"campaignfilter-campaign-label"},e.createElement("div",{className:"campaign-type is-mini is-widget component-loader-box"})),e.createElement("div",{className:"campaignfilter-campaign-data"},e.createElement("a",{className:"component-loader-box"},"XXXXXX XXXXXXXXXXXX"),e.createElement("div",{className:"campaignfilter-campaign-id"},e.createElement("span",{className:"component-loader-box"},"XX: XXX"))),e.createElement("div",{className:"campaignfilter-campaign-offers"},e.createElement("span",{className:"component-loader-box"},"XXX")))}))))}}).call(this,r("q1tI"))},VisR:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return d}));var n,i=r("2vnA"),a=r("kMSe"),o=r("GaHK"),c=r("jnO1"),l=r("eeMe"),s=r("fRW6");function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}window.Dropzone=l;var d=Object(a.c)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))(n=Object(a.d)(n=function(t){function r(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=m(this,f(r).call(this))).changeValue=function(e){var r=t.props.multipleCampaignEditorStore,n=r.currentLocaleEntryData,i=r.changeLocaleEntry,a=n.localeEntry.locale_entry_id;i("value",_.isString(e)?e:e[a].values[0])},t.closeAssetUploader=function(){return t.props.multipleCampaignEditorStore.toggleAssetUploader(!1)},t.selectNewStaticAsset=function(e,r){t.props.multipleCampaignEditorStore.replaceStaticAsset({result:{static_asset:r}}),t.props.multipleCampaignEditorStore.changeLocaleEntry("value",r.name)},t.onEnumValueChange=function(e){var r=e.target.value;return t.props.multipleCampaignEditorStore.changeLocaleEntry("value",r)},t.colorPicker=e.createRef(),t}var n,a,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(r,t),n=r,(a=[{key:"render",value:function(){var t=this,r=this.props,n=r.campaignsStore.campaigns,a=r.multipleCampaignEditorStore,l=a.currentLocaleEntryData.localeEntry,p=a.assetUploaderData,u=a.campaignsByLocaleKey,m=a.eligibleViewSetupIds,f=a.errors,y=a.isAssetUploaderShown,b=a.localeEntryValue,g=a.previewMode,d=a.selectedCampaigns,h=a.staticAsset,v=a.toggleAssetUploader,O=a.togglePreview,w=a.variables,E=a.variableKeys,j=classNames({"validation-error":f.get("value")}),S=_.get(l,"default","");return e.createElement("div",{className:"edit-field-grid-fluid","data-validate-block":"value"},l.isString&&e.createElement(window.Components.AutocompleteField,{class:j,text:b,dataId:l.locale_entry_id,placeholder:S,onLocalizationItemChange:this.changeValue,liquidInterpolationKeys:E,liquidInterpolations:w}),l.isColor&&e.createElement("div",{ref:this.colorPicker},e.createElement(o.UIColorPicker,{name:"color",value:b,onChange:function(e){t.changeValue(e.target.value)}})),l.isEnum&&e.createElement(s.b,{className:"form-chosen-select",onChange:this.onEnumValueChange,options:l.enumSelectOptions,width:"100%",value:b}),l.isAsset&&h&&e.createElement("div",{className:"edit-field-image"},e.createElement("img",{src:h.url,onClick:v}),e.createElement("div",{className:"edit-field-image-tip"},e.createElement("div",{className:"edit-field-image-tip-row"},h.name),e.createElement("div",{className:"edit-field-image-tip-row"},e.createElement("div",{className:"mrm"},e.createElement(o.UIIcon,{name:"arrowsToOut"}),h.dimensions),e.createElement("div",null,e.createElement(o.UIIcon,{name:"clip"}),h.fileSize)))),_.some(f)&&e.createElement(c.a,{errors:Object(i.toJS)(f),name:"value",hideName:!0}),y&&h&&e.createElement(window.LocaleAssetsUploader,{localization:{localization_id:l.locale_entry_id},selected:p,selectedLocalizationAssetData:h,onSelect:this.selectNewStaticAsset,onClose:this.closeAssetUploader}),g&&e.createElement(Widget.AbTestPreviewContainer,{attachedCampaignIds:d.map((function(e){return e.id})),abTestName:l.humanizedKey,allCampaigns:Array.from(n.values()),onClose:O,viewSetupIds:m,campaignsByLocaleKey:u,isSocialSharing:l.isSocialSharing,localizationKey:l.locale_entry_key,localeEntryValue:b}))}}])&&u(n.prototype,a),l&&u(n,l),r}(e.Component))||n)||n}).call(this,r("q1tI"))},Z0hH:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return ae}));var n,i,a,o,c,l,s,p,u,m,f,y,b,g,d,h,v,O,w,E,j,S,P,C,k,D,A,N,L,z,x,K,X,V,U,B=r("o0o1"),I=r.n(B),F=r("2vnA"),M=r("Iw0f"),G=r("yW3s"),T=r("52sZ"),q=r("iyA1"),R=r("ZVfT"),Q=r("Foy5"),W=r("L0cm");function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object(F.configure)({enforceActions:"observed"});var te=M.a.campaigns,re=Object(R.p)(),ne=[["selected_campaigns_ids",[window.Campaign.id]],["value",""]],ie=W.n.map((function(e){return[e,!0]}));var ae=new(n=F.action.bound,i=F.action.bound,a=F.action.bound,o=F.action.bound,c=F.action.bound,l=F.action.bound,s=F.action.bound,p=F.action.bound,u=F.action.bound,m=F.action.bound,f=F.action.bound,y=F.action.bound,b=F.action.bound,g=F.action.bound,d=F.action.bound,h=F.action.bound,v=F.action.bound,O=F.action.bound,E=ee((w=function(){function t(){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),J(this,"availableVariablesFetched",E,this),J(this,"campaignsByLocaleKey",j,this),J(this,"campaignsByLocaleKeyFetched",S,this),J(this,"changes",P,this),J(this,"errors",C,this),J(this,"ineligibleGroupLimit",k,this),J(this,"isAssetUploaderShown",D,this),J(this,"previewMode",A,this),J(this,"searchQuery",N,this),J(this,"staticAsset",L,this),J(this,"statuses",z,this),J(this,"unselectedGroupLimit",x,this),J(this,"variables",K,this),this.matchesSearchQuery=function(e){var t=e.id,n=e.name,i=e.status,a=Array.from(r.statuses.keys()).filter((function(e){return r.statuses.get(e)}));return!(_.some(a)&&!a.includes(i.toUpperCase()))&&"".concat(t).concat(n).concat(i).toLowerCase().includes(r.searchQuery)},this.findCurrentLocaleEntry=function(){return r.campaignsByLocaleKey.find((function(e){return e.campaign_id===+window.Campaign.id}))||{}},this.createIneligibleNotice=function(t){var n=t.id,i=r.campaignsByLocaleKey.find((function(e){return e.campaign_id===n}));if(_.get(i,"split_test_id")){var a=Routes.site_split_test_path(T.b.models.site.cached_slug,i.split_test_id);return["Used in ",e.createElement("a",{href:a,key:"1",target:"_blank"},"A/B test #$",i.split_test_id)]}return"Does not have this exact content"},J(this,"submitForm",X,this),J(this,"fetchAvailableVariables",V,this),J(this,"fetchCampaignsByLocaleKey",U,this)}var r,n,i;return r=t,(n=[{key:"handleSuccess",value:function(){var e=this.currentLocaleEntryData.localeEntry;this.errors.replace(new Map),ne[0][1]=Array.from(this.changes.get("selected_campaigns_ids")).slice().sort(),e.update({value:this.localeEntryValue}),window.Validation.succeed()}},{key:"handleErrors",value:function(e){var t=_.get(e,"responseJSON.result.errors",{});_.isArray(t)?window.Validation.showErrorFlash(t.map((function(e){return _.upperFirst(e)})).join("."),8e3):(this.errors.replace(t),window.Validation.showErrorFlash(),window.Validation.scrollToField(["value"]))}},{key:"toggleStatus",value:function(e,t){this.statuses.has(e)&&(t=_.isBoolean(t)?t:!this.statuses.get(e),this.statuses.set(e,t))}},{key:"toggleUnselectedSpoiler",value:function(e){_.isBoolean(e)||(e=this.unselectedGroupLimit===W.D),this.unselectedGroupLimit=e?1/0:W.D}},{key:"toggleIneligibleSpoiler",value:function(e){_.isBoolean(e)||(e=this.ineligibleGroupLimit===W.D),this.ineligibleGroupLimit=e?1/0:W.D}},{key:"togglePreview",value:function(e){this.previewMode=_.isBoolean(e)?e:!this.previewMode}},{key:"applySearchQuery",value:function(e){var t=e.target.value;this.searchQuery=t.toLowerCase(),this.toggleIneligibleSpoiler(!!t),this.toggleUnselectedSpoiler(!!t)}},{key:"toggleCampaign",value:function(e){var t=Object(F.toJS)(this.changes.get("selected_campaigns_ids"));t.includes(e)?t=_.without(t,e):t.push(e),this.changes.set("selected_campaigns_ids",t.slice().sort())}},{key:"toggleAllCampaigns",value:function(){var e=this.eligibleCampaigns.filter(this.matchesSearchQuery).map((function(e){return e.id})),t=this.allCampaignsSelected?[]:e;this.changes.set("selected_campaigns_ids",t.slice().sort())}},{key:"toggleAssetUploader",value:function(e){this.isAssetUploaderShown=_.isUndefined(e)?!this.isAssetUploaderShown:e}},{key:"fetchStaticAsset",value:function(){var e=q.a.fetchData(this.localeEntryValue);e&&e.then(this.replaceStaticAsset)}},{key:"replaceStaticAsset",value:function(e){this.staticAsset=new q.a(e.result.static_asset)}},{key:"changeLocaleEntry",value:function(e,t){this.changes.set(e,t)}},{key:"cancelChanges",value:function(){var e=this.currentLocaleEntryData.localeEntry;this.changes.set("value",e.valueOrDefault),this.changes.set("selected_campaigns_ids",ne[0][1]),this.statuses=new Map(ie),e.isAsset&&this.fetchStaticAsset(),window.Validation.scrollToField(["value"])}},{key:"updateAvailableVariablesFetched",value:function(e){this.availableVariablesFetched=_.isBoolean(e)?e:!this.availableVariablesFetched}},{key:"updateVariables",value:function(e){this.updateAvailableVariablesFetched(!0),this.variables=e.variables,this.variableKeys=Object(Q.a)(e.variables)}},{key:"updateCampaignsByLocaleKey",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_.forEach(t,(function(t,r){t.campaign_id=+r,t.locale_entry_key=_.get(re,"locale_entry_key"),e.updateCampaignByLocaleKey(t)}));var r=this.findCurrentLocaleEntry();r&&(this.changes.set("value",r.valueOrDefault),r.isAsset&&this.fetchStaticAsset()),this.campaignsByLocaleKeyFetched=!0}},{key:"updateCampaignByLocaleKey",value:function(e){var t=this.campaignsByLocaleKey.find((function(t){return t.locale_entry_id===e.locale_entry_id}));if(t)t.update(e);else{var r=new G.a(e);this.campaignsByLocaleKey.push(r)}}},{key:"variablesData",get:function(){return Object(F.toJS)(this.variables)}},{key:"currentLocaleEntryData",get:function(){var e={localeEntry:{},viewSetup:{}};return e.localeEntry=this.findCurrentLocaleEntry(),_.some(e.localeEntry)&&re.view_setup_id&&(e.viewSetup=e.localeEntry.view_setups.find((function(e){return e.view_setup_id===re.view_setup_id}))),e}},{key:"campaignEditorUrl",get:function(){var e=re,t=e.view_setup_id,r=e.view_preset_cached_slug;return Routes.editor_site_campaign_path(T.b.models.site.cached_slug,window.Campaign,{anchor:"/view_setups/".concat(t,"/preset_slug/").concat(r)})}},{key:"pristine",get:function(){return this.currentLocaleEntryData.localeEntry.valueOrDefault===this.changes.get("value")&&_.isEqual(ne[0][1],Array.from(this.changes.get("selected_campaigns_ids")))}},{key:"eligibleViewSetupIds",get:function(){var e=this;return _.transform(this.selectedCampaigns,(function(t,r){var n=r.id;e.campaignsByLocaleKey.find((function(e){return e.campaign_id===n})).view_setups.forEach((function(e){return t.push(e.view_setup_id)}))}),[])}},{key:"allStatusesEnabled",get:function(){return 1===_.uniq(Array.from(this.statuses.values())).length}},{key:"selectedCampaigns",get:function(){var e=this;return Object(R.u)(this.eligibleCampaigns.filter((function(t){return e.changes.get("selected_campaigns_ids").includes(t.id)&&e.matchesSearchQuery(t)})))}},{key:"unselectedCampaigns",get:function(){var e=this;return Object(R.u)(this.eligibleCampaigns.filter((function(t){return!e.changes.get("selected_campaigns_ids").includes(t.id)&&e.matchesSearchQuery(t)})))}},{key:"ineligibleCampaigns",get:function(){return Object(R.u)(_.differenceBy(Array.from(te.values()),this.eligibleCampaigns,"id").filter(this.matchesSearchQuery))}},{key:"eligibleCampaigns",get:function(){var e=this.currentLocaleEntryData.localeEntry;return this.campaignsByLocaleKey.reduce((function(t,r){var n=te.get("".concat(r.campaign_id));return n?(_.isEqual(r.enum_values.slice().sort(),e.enum_values.slice().sort())&&r.trait===e.trait&&_.some(r.view_setups)&&!r.split_test_id&&t.push(n),t):t}),[])}},{key:"localeEntryValue",get:function(){var e=this.currentLocaleEntryData.localeEntry;return!!e&&(this.pristine?e.valueOrDefault:this.changes.get("value"))}},{key:"assetUploaderData",get:function(){return{value:this.localeEntryValue,preview:_.get(this.staticAsset,"url")}}},{key:"allCampaignsSelected",get:function(){return _.isEmpty(this.unselectedCampaigns)&&_.some(this.selectedCampaigns)}},{key:"unselectedGroupMinimized",get:function(){return this.unselectedGroupLimit===W.D}},{key:"ineligibleGroupMinimized",get:function(){return this.ineligibleGroupLimit===W.D}},{key:"statusOptions",get:function(){var e=this;return W.n.reduce((function(t,r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(r,!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,Z({},W.m[r],e.statuses.get(r)))}),{})}}])&&Y(r.prototype,n),i&&Y(r,i),t}()).prototype,"availableVariablesFetched",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=ee(w.prototype,"campaignsByLocaleKey",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=ee(w.prototype,"campaignsByLocaleKeyFetched",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=ee(w.prototype,"changes",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map(ne)}}),C=ee(w.prototype,"errors",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),k=ee(w.prototype,"ineligibleGroupLimit",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.D}}),D=ee(w.prototype,"isAssetUploaderShown",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=ee(w.prototype,"previewMode",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=ee(w.prototype,"searchQuery",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=ee(w.prototype,"staticAsset",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),z=ee(w.prototype,"statuses",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map(ie)}}),x=ee(w.prototype,"unselectedGroupLimit",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.D}}),K=ee(w.prototype,"variables",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ee(w.prototype,"variablesData",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"variablesData"),w.prototype),ee(w.prototype,"currentLocaleEntryData",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"currentLocaleEntryData"),w.prototype),ee(w.prototype,"campaignEditorUrl",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"campaignEditorUrl"),w.prototype),ee(w.prototype,"pristine",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"pristine"),w.prototype),ee(w.prototype,"eligibleViewSetupIds",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"eligibleViewSetupIds"),w.prototype),ee(w.prototype,"allStatusesEnabled",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"allStatusesEnabled"),w.prototype),ee(w.prototype,"selectedCampaigns",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"selectedCampaigns"),w.prototype),ee(w.prototype,"unselectedCampaigns",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"unselectedCampaigns"),w.prototype),ee(w.prototype,"ineligibleCampaigns",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"ineligibleCampaigns"),w.prototype),ee(w.prototype,"eligibleCampaigns",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"eligibleCampaigns"),w.prototype),ee(w.prototype,"localeEntryValue",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"localeEntryValue"),w.prototype),ee(w.prototype,"assetUploaderData",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"assetUploaderData"),w.prototype),ee(w.prototype,"allCampaignsSelected",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"allCampaignsSelected"),w.prototype),ee(w.prototype,"unselectedGroupMinimized",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"unselectedGroupMinimized"),w.prototype),ee(w.prototype,"ineligibleGroupMinimized",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"ineligibleGroupMinimized"),w.prototype),ee(w.prototype,"statusOptions",[F.computed],Object.getOwnPropertyDescriptor(w.prototype,"statusOptions"),w.prototype),X=ee(w.prototype,"submitForm",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(F.flow)(I.a.mark((function e(){var t,r,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.selectedCampaigns.map((function(e){return e.id})),r="multi_campaign_update_internal_site_campaign_locale_entries_path",n={key:re.locale_entry_key,value:this.localeEntryValue,selected_campaigns_ids:t},!_.isEmpty(t)){e.next=7;break}window.Validation.showErrorFlash("No campaigns selected"),e.next=16;break;case 7:return e.prev=7,e.next=10,$.ajax({type:"PUT",url:Routes[r](T.b.models.site.cached_slug,window.Campaign),data:n});case 10:this.handleSuccess(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),this.handleErrors(e.t0);case 16:case"end":return e.stop()}}),e,this,[[7,13]])}))).bind(this)}}),ee(w.prototype,"handleSuccess",[i],Object.getOwnPropertyDescriptor(w.prototype,"handleSuccess"),w.prototype),ee(w.prototype,"handleErrors",[a],Object.getOwnPropertyDescriptor(w.prototype,"handleErrors"),w.prototype),ee(w.prototype,"toggleStatus",[o],Object.getOwnPropertyDescriptor(w.prototype,"toggleStatus"),w.prototype),ee(w.prototype,"toggleUnselectedSpoiler",[c],Object.getOwnPropertyDescriptor(w.prototype,"toggleUnselectedSpoiler"),w.prototype),ee(w.prototype,"toggleIneligibleSpoiler",[l],Object.getOwnPropertyDescriptor(w.prototype,"toggleIneligibleSpoiler"),w.prototype),ee(w.prototype,"togglePreview",[s],Object.getOwnPropertyDescriptor(w.prototype,"togglePreview"),w.prototype),ee(w.prototype,"applySearchQuery",[p],Object.getOwnPropertyDescriptor(w.prototype,"applySearchQuery"),w.prototype),ee(w.prototype,"toggleCampaign",[u],Object.getOwnPropertyDescriptor(w.prototype,"toggleCampaign"),w.prototype),ee(w.prototype,"toggleAllCampaigns",[m],Object.getOwnPropertyDescriptor(w.prototype,"toggleAllCampaigns"),w.prototype),ee(w.prototype,"toggleAssetUploader",[f],Object.getOwnPropertyDescriptor(w.prototype,"toggleAssetUploader"),w.prototype),ee(w.prototype,"fetchStaticAsset",[y],Object.getOwnPropertyDescriptor(w.prototype,"fetchStaticAsset"),w.prototype),ee(w.prototype,"replaceStaticAsset",[b],Object.getOwnPropertyDescriptor(w.prototype,"replaceStaticAsset"),w.prototype),ee(w.prototype,"changeLocaleEntry",[g],Object.getOwnPropertyDescriptor(w.prototype,"changeLocaleEntry"),w.prototype),ee(w.prototype,"cancelChanges",[d],Object.getOwnPropertyDescriptor(w.prototype,"cancelChanges"),w.prototype),V=ee(w.prototype,"fetchAvailableVariables",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(F.flow)(I.a.mark((function e(){var t,r,n,i,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(t=re).view_setup_id,n=t.view_preset_cached_slug,r){e.next=3;break}return e.abrupt("return");case 3:return"available_variables_internal_site_campaign_view_setup_path",i={view_preset_slug:n},this.updateAvailableVariablesFetched(!1),e.prev=6,e.next=9,$.get(Routes.available_variables_internal_site_campaign_view_setup_path(T.b.models.site.cached_slug,window.Campaign,r,i));case 9:(a=e.sent)&&a.result.variables?this.updateVariables(a.result):this.updateAvailableVariablesFetched(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),Widget.Utils.notifyDevelopers({name:"Unable to fetchAvailableVariables",message:"Ajax failure",xhr:e.t0});case 16:case"end":return e.stop()}}),e,this,[[6,13]])}))).bind(this)}}),ee(w.prototype,"updateAvailableVariablesFetched",[h],Object.getOwnPropertyDescriptor(w.prototype,"updateAvailableVariablesFetched"),w.prototype),ee(w.prototype,"updateVariables",[v],Object.getOwnPropertyDescriptor(w.prototype,"updateVariables"),w.prototype),U=ee(w.prototype,"fetchCampaignsByLocaleKey",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(F.flow)(I.a.mark((function e(){var t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("campaigns_by_locale_key_internal_site_localization_split_tests_path",t={locale_key:_.get(re,"locale_entry_key")},this.campaignsByLocaleKeyFetched=!1,!t.locale_key){e.next=16;break}return e.prev=4,e.next=7,$.get(Routes.campaigns_by_locale_key_internal_site_localization_split_tests_path(T.b.models.site.cached_slug,t));case 7:r=e.sent,this.updateCampaignsByLocaleKey(r.result.campaigns),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),Widget.Utils.notifyDevelopers({name:"Unable to fetchCampaignsByLocaleKey",message:"Ajax failure",xhr:e.t0});case 14:e.next=17;break;case 16:this.campaignsByLocaleKeyFetched=!0;case 17:case"end":return e.stop()}}),e,this,[[4,11]])}))).bind(this)}}),ee(w.prototype,"updateCampaignsByLocaleKey",[O],Object.getOwnPropertyDescriptor(w.prototype,"updateCampaignsByLocaleKey"),w.prototype),ee(w.prototype,"updateCampaignByLocaleKey",[F.action],Object.getOwnPropertyDescriptor(w.prototype,"updateCampaignByLocaleKey"),w.prototype),w)}).call(this,r("q1tI"))},iyA1:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n,i,a,o,c=r("2vnA"),l=r("ZVfT"),s=r("52sZ");function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object(c.configure)({enforceActions:"observed"});var m=(n=c.action.bound,o=a=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_.forEach(e.keys,(function(e,n){e.observable?Object(c.extendObservable)(t,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},n,r[n])):t[n]=r[n]}))}var t,r,n;return t=e,(r=[{key:"update",value:function(t){var r=this;_.forEach(t,(function(t,n){e.keys[n].observable&&(r[n]=t)}))}},{key:"fileSize",get:function(){var e=this,t=function(t){return e.size/Math.pow(1024,t)},r=[{label:"MB",degree:2},{label:"KB",degree:1},{label:"B",degree:0}],n=r.find((function(e){var r=e.degree;return t(r)>=1}))||r[r.length-1];return"".concat(Object(l.r)(t(n.degree))," ").concat(n.label)}},{key:"dimensions",get:function(){return"".concat(this.width," x ").concat(this.height," px")}}])&&p(t.prototype,r),n&&p(t,n),e}(),a.fetchData=function(e){var t={name:e,no_spinner:!0};return new Promise((function(e,r){$.get(Routes.show_internal_site_static_assets_path(s.b.models.site.cached_slug,t)).success(e).error(r)}))},a.keys={created_at:{observable:!1},id:{observable:!1},height:{observable:!0},name:{observable:!1},size:{observable:!0},updated_at:{observable:!0},url:{observable:!0},width:{observable:!0}},u((i=o).prototype,"update",[n],Object.getOwnPropertyDescriptor(i.prototype,"update"),i.prototype),u(i.prototype,"fileSize",[c.computed],Object.getOwnPropertyDescriptor(i.prototype,"fileSize"),i.prototype),u(i.prototype,"dimensions",[c.computed],Object.getOwnPropertyDescriptor(i.prototype,"dimensions"),i.prototype),i)},pA6q:function(e,t,r){"use strict";var n=r("y4Se");r.d(t,"a",(function(){return n.a}));var i=r("wrbi");r.d(t,"b",(function(){return i.a}));var a=r("QSSZ");r.d(t,"c",(function(){return a.a}));var o=r("4GYj");r.d(t,"e",(function(){return o.a}));var c=r("VisR");r.d(t,"f",(function(){return c.a}));var l=r("OF73");r.d(t,"d",(function(){return l.a}))},tMb7:function(e,t,r){"use strict";r.r(t);r("F9bE"),r("bKju");var n=r("ho87"),i=r("1m7l");n.a.render(i.a,"MultipleCampaignEditor")},wrbi:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return b}));var n,i=r("kMSe"),a=r("L0cm");function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(t){var r=t.title,n=t.count;return e.createElement("h4",{className:"campaignfilter-spoiler is-readonly"},e.createElement("span",{className:"campaignfilter-spoiler-link"},e.createElement("strong",null,r),e.createElement("span",{className:"muted mlm"},n)))},y=Object(i.d)(Widget.CampaignFilterCampaign),b=Object(i.c)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))(n=Object(i.d)(n=function(t){function r(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=l(this,(e=s(r)).call.apply(e,[this].concat(i)))).toggleCampaign=function(e){var r=e.id;t.props.multipleCampaignEditorStore.toggleCampaign(r)},t}var n,i,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(r,t),n=r,(i=[{key:"render",value:function(){var t=this,r=this.props,n=r.multipleCampaignEditorStore.searchQuery,i=r.campaigns,o=r.checked,c=r.createNotice,l=r.editable,s=r.groupMinimized,p=r.limit,u=r.shouldLimit,m=r.title,b=r.toggleSpoiler;return e.createElement("ul",{className:"campaignfilter-list mbn"},e.createElement("li",null,e.createElement(f,{title:m,count:i.length})),i.slice(0,p).map((function(r){return e.createElement(y,{abbreviation:r.placement_category_abbreviation,campaign:r,checked:o,is_edit:l,key:r.id,notice:c&&c(r),onStatusChange:t.toggleCampaign})})),u&&i.length>a.D&&!n&&e.createElement("li",{className:"is-more"},e.createElement("div",{className:"base-btn is-small is-action is-block",onClick:b},s?"Show":"Hide"," all campaigns")))}}])&&c(n.prototype,i),o&&c(n,o),r}(e.Component))||n)||n}).call(this,r("q1tI"))},y4Se:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return y}));var n,i=r("kMSe"),a=r("pA6q");function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=Object(i.c)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))(n=Object(i.d)(n=function(t){function r(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=s(this,(e=p(r)).call.apply(e,[this].concat(i)))).toggleAllCampaigns=function(){t.props.multipleCampaignEditorStore.toggleAllCampaigns()},t.toggleStatus=function(e){var r=e.target.innerText.trim().toUpperCase();t.props.multipleCampaignEditorStore.toggleStatus(r)},t}var n,i,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,t),n=r,(i=[{key:"render",value:function(){var t=this.props,r=t.campaignsStore.campaigns,n=t.multipleCampaignEditorStore,i=n.allCampaignsSelected,o=n.applySearchQuery,l=n.campaignsByLocaleKey,s=n.createIneligibleNotice,p=n.ineligibleCampaigns,u=n.ineligibleGroupMinimized,m=n.ineligibleGroupLimit,f=n.searchQuery,y=n.selectedCampaigns,b=n.statusOptions,g=n.toggleUnselectedSpoiler,d=n.toggleIneligibleSpoiler,h=n.unselectedCampaigns,v=n.unselectedGroupLimit,O=n.unselectedGroupMinimized,w=[{campaigns:y,checked:!0,editable:!0,groupMinimized:!1,limit:1/0,title:"Selected campaigns",toggleSpoiler:_.identity,shouldLimit:!1},{campaigns:h,checked:!1,editable:!0,groupMinimized:O,limit:v,title:"Unselected campaigns",toggleSpoiler:g,shouldLimit:!0},{campaigns:p,checked:!1,createNotice:s,editable:!1,groupMinimized:u,limit:m,title:"Ineligible campaigns",toggleSpoiler:d,shouldLimit:!0}];return e.createElement("div",null,_.some(l)&&_.some(r)?e.createElement("div",null,e.createElement(Widget.CampaignFilterSearch,{placeholder:"Search by campaign ID, name, or status",query:f,statuses:b,onQuerySearch:o,onStatusChange:this.toggleStatus}),e.createElement(Widget.CampaignFilterHead,{toggle:this.toggleAllCampaigns,all_campaigns_selected:i}),w.map((function(t,r){return e.createElement(a.b,c({},t,{key:r}))}))):e.createElement(a.c,null))}}])&&l(n.prototype,i),o&&l(n,o),r}(e.Component))||n)||n}).call(this,r("q1tI"))},yW3s:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n,i,a,o=r("2vnA"),c=r("L0cm");function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object(o.configure)({enforceActions:"observed"});var p=(a=i=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_.forEach(e.keys,(function(e,n){e.observable?Object(o.extendObservable)(t,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},n,r[n])):t[n]=r[n]}))}var t,r,n;return t=e,(r=[{key:"update",value:function(t){var r=this;_.forEach(t,(function(t,n){e.keys[n].observable&&(r[n]=t)}))}},{key:"valueOrDefault",get:function(){return this.value||this.default||""}},{key:"humanizedKey",get:function(){return _.flow(_.startCase,_.toLower,_.upperFirst)(this.locale_entry_key)}},{key:"enumSelectOptions",get:function(){return this.enum_values.map((function(e){return{value:e,label:e}}))}},{key:"isSocialSharing",get:function(){return this.view_setups.some((function(e){return"social_sharing"===e.identifier}))}},{key:"isString",get:function(){return!this.enum_values.length&&[c.K.STRING,c.K.MESSAGE].includes(this.trait)}},{key:"isColor",get:function(){return!this.enum_values.length&&this.trait===c.K.COLOR}},{key:"isAsset",get:function(){return!this.enum_values.length&&[c.K.ASSET,c.K.SHARE_IMAGE].includes(this.trait)}},{key:"isEnum",get:function(){return this.trait===c.K.BOOLEAN||_.some(this.enum_values)}}])&&l(t.prototype,r),n&&l(t,n),e}(),i.keys={campaign_id:{observable:!0},default:{observable:!0},enum_values:{observable:!0},locale_entry_id:{observable:!1},locale_entry_key:{observable:!1},split_test_id:{observable:!0},trait:{observable:!0},value:{observable:!0},view_setups:{observable:!0}},s((n=a).prototype,"update",[o.action],Object.getOwnPropertyDescriptor(n.prototype,"update"),n.prototype),s(n.prototype,"valueOrDefault",[o.computed],Object.getOwnPropertyDescriptor(n.prototype,"valueOrDefault"),n.prototype),s(n.prototype,"humanizedKey",[o.computed],Object.getOwnPropertyDescriptor(n.prototype,"humanizedKey"),n.prototype),s(n.prototype,"enumSelectOptions",[o.computed],Object.getOwnPropertyDescriptor(n.prototype,"enumSelectOptions"),n.prototype),s(n.prototype,"isSocialSharing",[o.computed],Object.getOwnPropertyDescriptor(n.prototype,"isSocialSharing"),n.prototype),s(n.prototype,"isString",[o.computed],Object.getOwnPropertyDescriptor(n.prototype,"isString"),n.prototype),s(n.prototype,"isColor",[o.computed],Object.getOwnPropertyDescriptor(n.prototype,"isColor"),n.prototype),s(n.prototype,"isAsset",[o.computed],Object.getOwnPropertyDescriptor(n.prototype,"isAsset"),n.prototype),s(n.prototype,"isEnum",[o.computed],Object.getOwnPropertyDescriptor(n.prototype,"isEnum"),n.prototype),n)}},[["tMb7",0,1]]]);